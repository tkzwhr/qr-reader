webpackJsonp([1],{135:function(t,e,s){"use strict";var n=s(7),a=s.n(n),i=s(4),c=s(191);e.a={name:"app",components:{Settings:c.a},data:function(){return{isRootView:!0,settingsDialog:!1}},watch:{$route:function(t){this.isRootView="/"===t.path},settingsDialog:function(t){t&&this.list(navigator)}},methods:a()({},Object(i.c)("mediaDevices",["initialize"]),Object(i.b)("mediaDevices",["list"])),mounted:function(){this.initialize()}}},143:function(t,e,s){"use strict";var n=s(7),a=s.n(n),i=s(4);e.a={name:"settings",data:function(){return{}},computed:a()({selectedCamera:{get:function(){return this.camera.selected},set:function(t){this.select(t)}}},Object(i.d)("mediaDevices",["camera"])),methods:a()({},Object(i.c)("mediaDevices",["select"]))}},146:function(t,e,s){"use strict";var n=s(7),a=s.n(n),i=s(4),c=s(147),o=s(204),r=s(208);e.a={name:"top",data:function(){return{scanned:null,savedSnackbar:!1}},watch:{"camera.selected":function(t){var e=this;void 0===t?this.list(navigator).then(function(){e.select(e.camera.devices[0].deviceId)}):t?o.a.start(navigator,t):o.a.stop()}},computed:a()({scannedMemo:function(){return this.scanned?Object(c.a)(this.scanned):Object(c.a)("")},scannedDialog:function(){return null!==this.scanned}},Object(i.d)("mediaDevices",["camera"])),methods:a()({capture:function(t){r.a.decode(t)},decode:function(t,e){!t&&e&&(this.scanned=e)},save:function(){this.$store.commit("saveScannedText",this.scanned),this.scanned=null,this.savedSnackbar=!0}},Object(i.c)("mediaDevices",["select"]),Object(i.b)("mediaDevices",["list"])),created:function(){o.a.setCallback(this.capture),r.a.setCallback(this.decode)},mounted:function(){o.a.setDOMRefs(this.$refs.video,this.$refs.canvas),o.a.start(navigator,this.camera.selected)},beforeDestroy:function(){o.a.stop()}}},147:function(t,e,s){"use strict";function n(t){var e={raw:t};return t.match(/https?:\/\//)?e.type="link":e.type="description","link"===e.type?e.html='<a href="'+t+'" target="_blank">'+t+"</a>":e.html=t,e}e.a=n},155:function(t,e,s){"use strict";var n=s(147);e.a={name:"history",data:function(){return{}},computed:{items:function(){return this.$store.state.scannedList.map(function(t){return{id:t.id,memo:Object(n.a)(t.text),scanDate:t.scanDate}})}},methods:{remove:function(t){this.$store.commit("removeScannedText",t)}}}},156:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(5),a=s(160),i=s.n(a),c=s(163),o=s(195),r=s(200),l=s(225),u=s.n(l),v=s(226);s.n(v);n.a.use(i.a),n.a.use(u.a),n.a.config.productionTip=!1,new n.a({el:"#app",store:o.a,router:r.a,template:"<App/>",components:{App:c.a}})},162:function(t,e,s){function n(t){return s(a(t))}function a(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var i={"./af":12,"./af.js":12,"./ar":13,"./ar-dz":14,"./ar-dz.js":14,"./ar-kw":15,"./ar-kw.js":15,"./ar-ly":16,"./ar-ly.js":16,"./ar-ma":17,"./ar-ma.js":17,"./ar-sa":18,"./ar-sa.js":18,"./ar-tn":19,"./ar-tn.js":19,"./ar.js":13,"./az":20,"./az.js":20,"./be":21,"./be.js":21,"./bg":22,"./bg.js":22,"./bm":23,"./bm.js":23,"./bn":24,"./bn.js":24,"./bo":25,"./bo.js":25,"./br":26,"./br.js":26,"./bs":27,"./bs.js":27,"./ca":28,"./ca.js":28,"./cs":29,"./cs.js":29,"./cv":30,"./cv.js":30,"./cy":31,"./cy.js":31,"./da":32,"./da.js":32,"./de":33,"./de-at":34,"./de-at.js":34,"./de-ch":35,"./de-ch.js":35,"./de.js":33,"./dv":36,"./dv.js":36,"./el":37,"./el.js":37,"./en-au":38,"./en-au.js":38,"./en-ca":39,"./en-ca.js":39,"./en-gb":40,"./en-gb.js":40,"./en-ie":41,"./en-ie.js":41,"./en-il":42,"./en-il.js":42,"./en-nz":43,"./en-nz.js":43,"./eo":44,"./eo.js":44,"./es":45,"./es-do":46,"./es-do.js":46,"./es-us":47,"./es-us.js":47,"./es.js":45,"./et":48,"./et.js":48,"./eu":49,"./eu.js":49,"./fa":50,"./fa.js":50,"./fi":51,"./fi.js":51,"./fo":52,"./fo.js":52,"./fr":53,"./fr-ca":54,"./fr-ca.js":54,"./fr-ch":55,"./fr-ch.js":55,"./fr.js":53,"./fy":56,"./fy.js":56,"./gd":57,"./gd.js":57,"./gl":58,"./gl.js":58,"./gom-latn":59,"./gom-latn.js":59,"./gu":60,"./gu.js":60,"./he":61,"./he.js":61,"./hi":62,"./hi.js":62,"./hr":63,"./hr.js":63,"./hu":64,"./hu.js":64,"./hy-am":65,"./hy-am.js":65,"./id":66,"./id.js":66,"./is":67,"./is.js":67,"./it":68,"./it.js":68,"./ja":69,"./ja.js":69,"./jv":70,"./jv.js":70,"./ka":71,"./ka.js":71,"./kk":72,"./kk.js":72,"./km":73,"./km.js":73,"./kn":74,"./kn.js":74,"./ko":75,"./ko.js":75,"./ky":76,"./ky.js":76,"./lb":77,"./lb.js":77,"./lo":78,"./lo.js":78,"./lt":79,"./lt.js":79,"./lv":80,"./lv.js":80,"./me":81,"./me.js":81,"./mi":82,"./mi.js":82,"./mk":83,"./mk.js":83,"./ml":84,"./ml.js":84,"./mn":85,"./mn.js":85,"./mr":86,"./mr.js":86,"./ms":87,"./ms-my":88,"./ms-my.js":88,"./ms.js":87,"./mt":89,"./mt.js":89,"./my":90,"./my.js":90,"./nb":91,"./nb.js":91,"./ne":92,"./ne.js":92,"./nl":93,"./nl-be":94,"./nl-be.js":94,"./nl.js":93,"./nn":95,"./nn.js":95,"./pa-in":96,"./pa-in.js":96,"./pl":97,"./pl.js":97,"./pt":98,"./pt-br":99,"./pt-br.js":99,"./pt.js":98,"./ro":100,"./ro.js":100,"./ru":101,"./ru.js":101,"./sd":102,"./sd.js":102,"./se":103,"./se.js":103,"./si":104,"./si.js":104,"./sk":105,"./sk.js":105,"./sl":106,"./sl.js":106,"./sq":107,"./sq.js":107,"./sr":108,"./sr-cyrl":109,"./sr-cyrl.js":109,"./sr.js":108,"./ss":110,"./ss.js":110,"./sv":111,"./sv.js":111,"./sw":112,"./sw.js":112,"./ta":113,"./ta.js":113,"./te":114,"./te.js":114,"./tet":115,"./tet.js":115,"./tg":116,"./tg.js":116,"./th":117,"./th.js":117,"./tl-ph":118,"./tl-ph.js":118,"./tlh":119,"./tlh.js":119,"./tr":120,"./tr.js":120,"./tzl":121,"./tzl.js":121,"./tzm":122,"./tzm-latn":123,"./tzm-latn.js":123,"./tzm.js":122,"./ug-cn":124,"./ug-cn.js":124,"./uk":125,"./uk.js":125,"./ur":126,"./ur.js":126,"./uz":127,"./uz-latn":128,"./uz-latn.js":128,"./uz.js":127,"./vi":129,"./vi.js":129,"./x-pseudo":130,"./x-pseudo.js":130,"./yo":131,"./yo.js":131,"./zh-cn":132,"./zh-cn.js":132,"./zh-hk":133,"./zh-hk.js":133,"./zh-tw":134,"./zh-tw.js":134};n.keys=function(){return Object.keys(i)},n.resolve=a,t.exports=n,n.id=162},163:function(t,e,s){"use strict";function n(t){s(164)}var a=s(135),i=s(194),c=s(2),o=n,r=c(a.a,i.a,!1,o,null,null);e.a=r.exports},164:function(t,e){},191:function(t,e,s){"use strict";function n(t){s(192)}var a=s(143),i=s(193),c=s(2),o=n,r=c(a.a,i.a,!1,o,"data-v-13fc9363",null);e.a=r.exports},192:function(t,e){},193:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",[s("v-card-title",[s("span",[t._v("設定")])]),t._v(" "),s("v-card-text",[s("v-select",{attrs:{items:t.camera.devices,label:"使用するカメラ","item-text":"label","item-value":"deviceId"},model:{value:t.selectedCamera,callback:function(e){t.selectedCamera=e},expression:"selectedCamera"}})],1),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){e.stopPropagation(),t.$emit("close")}}},[t._v("閉じる")])],1)],1)},a=[],i={render:n,staticRenderFns:a};e.a=i},194:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[t.isRootView?s("v-toolbar",{attrs:{color:"primary"}},[s("v-toolbar-title",{staticClass:"white--text"},[t._v("QR Reader")]),t._v(" "),s("v-spacer"),t._v(" "),s("v-btn",{attrs:{icon:"",to:"/history"}},[s("v-icon",{staticClass:"white--text"},[t._v("history")])],1),t._v(" "),s("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.settingsDialog=!0}}},[s("v-icon",{staticClass:"white--text"},[t._v("settings")])],1)],1):s("v-toolbar",{attrs:{color:"primary"}},[s("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.$router.go(-1)}}},[s("v-icon",{staticClass:"white--text"},[t._v("arrow_back")])],1),t._v(" "),s("v-toolbar-title",{staticClass:"white--text"},[t._v("QR Reader")])],1),t._v(" "),s("main",[s("router-view")],1),t._v(" "),s("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.settingsDialog,callback:function(e){t.settingsDialog=e},expression:"settingsDialog"}},[s("settings",{ref:"settings",on:{close:function(e){t.settingsDialog=!1}}})],1)],1)},a=[],i={render:n,staticRenderFns:a};e.a=i},195:function(t,e,s){"use strict";var n=s(5),a=s(4),i=s(196),c=s.n(i),o=s(199);n.a.use(a.a),e.a=new a.a.Store({modules:{mediaDevices:o.a},state:{views:{visibility:{settings:!1}},scannedList:[]},mutations:{showView:function(t,e){t.views.visibility[e]=!0},hideView:function(t,e){t.views.visibility[e]=!1},saveScannedText:function(t,e){t.scannedList.push({id:c()(),text:e,scanDate:new Date})},removeScannedText:function(t,e){t.scannedList=t.scannedList.filter(function(t){return t.id!==e})}}})},199:function(t,e,s){"use strict";var n={namespaced:!0,state:{camera:{devices:[],selected:void 0}},mutations:{initialize:function(t,e){t.camera.selected=localStorage.getItem("mediaDevices.camera.deviceId")},setDevices:function(t,e){t.camera.devices=e},select:function(t,e){localStorage.setItem("mediaDevices.camera.deviceId",e),t.camera.selected=e}},actions:{list:function(t,e){return e.mediaDevices.enumerateDevices().then(function(e){var s=e.filter(function(t){return"videoinput"===t.kind}).map(function(t){return{deviceId:t.deviceId,label:t.label.length>0?t.label:"（カメラが許可されてないため表示できません）"}});s.push({label:"使用しない",deviceId:""}),t.commit("setDevices",s)})}}};e.a=n},200:function(t,e,s){"use strict";var n=s(5),a=s(201),i=s(202),c=s(222);n.a.use(a.a),e.a=new a.a({routes:[{path:"/",name:"Top",component:i.a},{path:"/history",name:"History",component:c.a}]})},202:function(t,e,s){"use strict";function n(t){s(203)}var a=s(146),i=s(221),c=s(2),o=n,r=c(a.a,i.a,!1,o,"data-v-faa018bc",null);e.a=r.exports},203:function(t,e){},204:function(t,e,s){"use strict";var n=s(148),a=s.n(n),i=s(149),c=s.n(i),o=function(){function t(e){a()(this,t),this.fps=e}return c()(t,[{key:"setDOMRefs",value:function(t,e){this.videoRef=t,this.canvasRef=e}},{key:"setCallback",value:function(t){this.callback=t}},{key:"start",value:function(t,e){if(e&&0!==e.length){this.stop();var s={audio:!1,video:{optional:[{sourceId:e}]}},n=this;return t.mediaDevices.getUserMedia(s).then(function(t){n.videoRef.srcObject=t,n.stopCallback=function(){t.getVideoTracks()[0].stop()},n.capture()})}}},{key:"stop",value:function(){this.stopCallback&&(this.stopCallback(),this.stopCallback=null)}},{key:"capture",value:function(){var t=this;if(this.stopCallback){var e=this.canvasRef.getContext("2d"),s=this.videoRef.offsetWidth,n=this.videoRef.offsetHeight;this.canvasRef.setAttribute("width",s),this.canvasRef.setAttribute("height",n),e.drawImage(this.videoRef,0,0,s,n),this.callback(e.getImageData(0,0,s,n)),setTimeout(function(){t.capture()},1e3/this.fps)}}}]),t}();e.a=new o(12)},208:function(t,e,s){"use strict";var n=s(148),a=s.n(n),i=s(149),c=s.n(i),o=s(209),r=function(){function t(){a()(this,t),this.qr=new o.a}return c()(t,[{key:"setCallback",value:function(t){this.qr.callback=function(e,s){return e?void t(e,null):s.result?void t(null,s.result):void t(null,null)}}},{key:"decode",value:function(t){this.qr.decode(t)}}]),t}();e.a=new r},221:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("canvas",{ref:"canvas"}),t._v(" "),s("video",{ref:"video",attrs:{autoplay:""}})]),t._v(" "),s("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.scannedDialog,callback:function(e){t.scannedDialog=e},expression:"scannedDialog"}},[s("v-card",[s("v-card-title",[s("span",[t._v("読み取りました")])]),t._v(" "),s("v-card-text",[s("v-icon",[t._v(t._s(t.scannedMemo.type))]),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.scannedMemo.html)}})],1),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){return e.stopPropagation(),t.save(e)}}},[t._v("保存する")]),t._v(" "),s("v-btn",{attrs:{flat:""},on:{click:function(e){e.stopPropagation(),t.scanned=null}}},[t._v("閉じる")])],1)],1)],1),t._v(" "),s("v-snackbar",{attrs:{timeout:3e3},model:{value:t.savedSnackbar,callback:function(e){t.savedSnackbar=e},expression:"savedSnackbar"}},[t._v("保存しました")])],1)},a=[],i={render:n,staticRenderFns:a};e.a=i},222:function(t,e,s){"use strict";function n(t){s(223)}var a=s(155),i=s(224),c=s(2),o=n,r=c(a.a,i.a,!1,o,null,null);e.a=r.exports},223:function(t,e){},224:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.items.length>0?s("v-list",{attrs:{"two-line":"",subheader:""}},t._l(t.items,function(e){return s("v-list-tile",{key:e.memo.raw,attrs:{avatar:""}},[s("v-list-tile-avatar",[s("v-icon",[t._v(t._s(e.memo.type))])],1),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[s("span",{domProps:{innerHTML:t._s(e.memo.html)}})]),t._v(" "),s("v-list-tile-sub-title",[t._v(t._s(t._f("moment")(e.scanDate,"YYYY/MM/DD HH:mm")))])],1),t._v(" "),s("v-list-tile-action",[s("v-menu",{attrs:{bottom:"",left:""}},[s("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[s("v-icon",[t._v("more_vert")])],1),t._v(" "),s("v-list",[s("v-list-tile",{on:{click:function(t){}}},[s("v-list-tile-avatar",[s("v-icon",[t._v("content_copy")])],1),t._v(" "),s("v-list-tile-title",[t._v("Copy")])],1),t._v(" "),s("v-list-tile",{on:{click:function(s){t.remove(e.id)}}},[s("v-list-tile-avatar",[s("v-icon",[t._v("delete")])],1),t._v(" "),s("v-list-tile-title",[t._v("Delete")])],1)],1)],1)],1)],1)})):s("v-card",[s("v-card-text",[s("p",{staticClass:"text-sm-center"},[t._v("データがありません")])])],1)],1)},a=[],i={render:n,staticRenderFns:a};e.a=i},226:function(t,e){}},[156]);
//# sourceMappingURL=app.1fb116da662f687a9cd7.js.map